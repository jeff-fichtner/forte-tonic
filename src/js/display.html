<script>
    class Display {
        #currentLessons = [];
        #availableLessons = [];

        #instrument;
        #student;
        #lengthOption;

        constructor() {
            this.lessons = [];
        }

        initialize() {
            $(() => {
                const $instruments = $('select').formSelect();
                $instruments.on(
                    'change',
                    function () {
                        const $item = $(this);
                        debugger
                        // google.script.run
                        //     .withSuccessHandler(displayLessons)
                        //     // .withFailureHandler(showLessonError)
                        //     .loadLessonsForInstrument(currentStudentId);
                    });

                // $("#section").append(createTextInput(1, "test", "Test Placeholder"));
                // propogation
                $('.add-lesson-icon').on(
                    'click',
                    function () {
                        const $item = $(this);
                        debugger
                        // google.script.run
                        //     .withSuccessHandler(displayLessons)
                        //     // .withFailureHandler(showLessonError)
                        //     .getCurrentLessonsForStudent(currentStudentId);
                    });

                // propogation
                $('.delete-lesson-icon').on(
                    'click',
                    function () {
                        const $item = $(this);
                        debugger
                        // google.script.run
                        //   .withSuccessHandler(displayLessons)
                        //   // .withFailureHandler(showLessonError)
                        //   .getCurrentLessonsForStudent("testing");
                    });
                // manipulate select => $('select').formSelect('methodName'); var instance = M.FormSelect.getInstance(elem);
            });
        }

        displayCurrentLessons(lessons) {
            console.log(lessons);
            // $('#add-lessons').append(createTextInput(1, "test", "Test Placeholder"));
            // update UI
        }

        displayAvailableLessons(lessons) {
            console.log(lessons);
            const lessonElements = lessons.map(x => "<li class=\"collection-item\" id=\"lesson_1\"><div>Monday: 3:00pm - 3:30pm, Piano (Private) with Lang Lang<a href=\"#!\" class=\"secondary-content\"><i class=\"add-lesson-icon material-icons green-text text-darken-2\">add_circle</i></a></div></li>")

            // $('#add-lessons').append(createTextInput(1, "test", "Test Placeholder"));
            // update UI
        };

        get currentInstrument() {
            return this.#instrument;
        }

        set currentInstrument(instrument) {
            this.#instrument = instrument;
            // update UI
        }

        get currentStudent() {
            return this.#student;
        }

        set currentStudent(student) {
            this.#student = student;
            // update UI
        }

        get currentLengthOption() {
            return this.#lengthOption;
        }

        set currentLengthOption(lengthOption) {
            this.#lengthOption = lengthOption;
            // update UI
        }

    }
    document.addEventListener('DOMContentLoaded', function() {
        M.Tabs.init(document.querySelectorAll('.tabs'));

        const sections = document.querySelectorAll('.section-content');
        const links = document.querySelectorAll('.section-link');

        function showSection(sectionId) {
            sections.forEach(section => {
            section.classList.remove('active');
            });
            const activeSection = document.getElementById(sectionId);
            activeSection.classList.add('active');
            // reinitialize tabs for the newly displayed section
            M.Tabs.init(activeSection.querySelectorAll('.tabs'));
        }

        // Optional: show Admin by default when page loads
        showSection('admin');

        links.forEach(link => {
            link.addEventListener('click', () => {
            const section = link.getAttribute('data-section');
            showSection(section);
            });
        });
    });
    
</script>